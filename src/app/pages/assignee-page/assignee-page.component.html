<h2>{{user.Fname}}</h2>



<div class="tasks-not-available">
  <p *ngIf="tasks.length < 1 && !isLoading"> No tasks available</p>
  <P *ngIf="isLoading">Loading...</P>
</div>

<p-table [value]="tasks" [loading]="isLoading" [scrollable]="true" *ngIf="tasks.length>0">
  <ng-template pTemplate="header">    
    <tr>
      <th pSortableColumn="Name">TASK <p-sortIcon field="Name" /></th>
      <th>DESCRIPTION</th>
      <th>COMPLETE TASK</th>
      <th pSortableColumn="Status">STAGE <p-sortIcon field="Name" /></th>
      <th pSortableColumn="DueDate">DUE DATE <p-sortIcon field="Name" /></th>  
      <!-- <th pSortableColumn="Level">Level <p-sortIcon field="Name" /></th>     -->
      <th><span class="pi pi-wave-pulse"></span></th>   
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-task>
    <tr [ngClass]="{'overdue': getStatusName(task.Status) === 'Overdue'}">
      <td>{{task.Name}}</td>
      <td>{{task.Description}}</td>
      <td>
        <input type="checkbox" [checked]="task.Status === 2" 
               [disabled]="task.Status === 2" 
               (change)="changeStatus(task)">
      </td>
      <td>{{ getStatusName(task.Status) }}</td>
      <td>{{task.DueDate | date: 'yyyy-MM-dd'}}</td>  
      <td>{{getLevelName(task.Level)}}</td>     
      <td>
        <button (click)="openViewTaskDialog(task)">View Details</button>
      </td>         
    </tr>
  </ng-template>
</p-table>
